
import "allocator/arena";
import { Log } from "../../lib/log";
import { Action, hasAuth, requireAuth } from "../../lib/action";
import "../../lib/types";
import { Name, NameToString } from "../../lib/name";

///@abi action
function hi(msg: string, age: i32): u64[] {
    Log.s("OOYYOOOOYYYYY").flush();
    let arr: u64[] = [
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0,
        1, 2, 3,4,5,6,7,8,9,0
    ];
    // let arr: u64[] = new Array<u64>(1024);
    arr[0] = <u64>age;
    return arr;
    // arr = null;
}

export function apply(receiver: u64, code: u64, action: u64): void {
    // check authority if need.
    // let authed: boolean = hasAuth(receiver);
    // Log.s("does receiver has authority? ").s(authed ? "YES" : "NO").flush();
    // requireAuth(receiver);

    // // NOTICE: call Action.init() at first.
    let act: Action = new Action(action);
    let status: boolean = act.init();
    let x: u64[];
    // if (!status) {
    //     Log.s("Init action failed.").flush();
    // } else {
        // let hiName: Name = new Name("hi");
    //     Log.s("apply action is: ").i(action).flush();
    //     let rrrr:string = NameToString(action);
    //     Log.s("test U16ToString is ").s(rrrr).flush();

        if (true/* hiName.equal(action) */) {
            for (let i: i32 = 0; i < 10000000; ++i) {
                x = hi("xxxx", i);
            }
        } else {
            Log.s("Error: unknown action name : " + NameToString(action)).flush();
        }

}
